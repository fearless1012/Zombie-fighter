<!doctype html>
<html>
<head>
<script src="js/ocanvas.js"></script>

  <script type='text/javascript'>
   
    var canvas = null;
    var img = null;
    var imageObj;
    var ctx = null;
    var imageReady = false;
    window.requestAnimFrame = (function(){
        return  window.requestAnimationFrame       ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame    ||
                window.oRequestAnimationFrame      ||
                window.msRequestAnimationFrame     ||
                function( callback ){
                  window.setTimeout(callback, 5000 / 60);
                };
    })();
    function onload() {
      canvas = document.getElementById('gameCanvas');
      ctx = canvas.getContext("2d");
      ctx1 = canvas.getContext("2d");
      img = new Image();
      img.src = 'images/ken-shoryuken.png';
      img.onload = loaded();
     
      var imageObj = new Image();
 
      imageObj.onload = function() {
        ctx1.drawImage(imageObj, 69, 59);
      };
     imageObj.src = 'images/bg.jpg';

      resize();
    }
    function loaded() {
        imageReady = true;
        setTimeout( update, 5000 / 60 );
    }
    function resize() {
      canvas.width = canvas.parentNode.clientWidth;
      canvas.height = canvas.parentNode.clientHeight;
      redraw();
         }
    function redraw() {
        /* var imageObj = new Image();
 
      imageObj.onload = function() {
        ctx1.drawImage(imageObj, 69, 59);
      };
     imageObj.src = 'images/bg.jpg';*/
        if (imageReady) {
      img = new Image();
      img.src = 'images/ken-shoryuken.png';
      img.onload = loaded();
           //canvas.addChild(image);
           ctx.drawImage(img, frame*96, 0, 60 , 54*2,
                          canvas.width/2 - 48, canvas.height/2 - 48, 60, 54*2);    
           
      
  }
    }
    
    var frame = 0;
    var lastUpdateTime = 0;
    var acDelta = 0;
    var msPerFrame = 100;
    
    function update() {
        requestAnimFrame(update)
    
        var delta = Date.now() - lastUpdateTime;
        if (acDelta > msPerFrame)
        {
            acDelta = 0;
           
            redraw();
            frame++;
            
              
              if (frame >= 6) frame--;
        } else
        {
            acDelta += delta;
        }
    
        lastUpdateTime = Date.now();
    }

  </script>
  </head>

<!------------------------------------------------------------------------------------------------------------------------------------------------
    var canvas = null;
    var img = null;
    var ctx = null;
    var imageReady = false;
    function onload() {
      canvas = document.getElementById('gameCanvas');
      ctx = canvas.getContext("2d");
      img = new Image();
      img.src = 'images/ken-shoryuken.png';
      img.onload = loaded();
      resize();
    }
    function loaded() {
        imageReady = true;
        setTimeout( update, 12500 / 60 );
    }
    function resize() {
      canvas.width = canvas.parentNode.clientWidth;
      canvas.height = canvas.parentNode.clientHeight;
      redraw();
    }
    function redraw() {
        ctx.fillStyle = '#000000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        if (imageReady) {
            ctx.drawImage(img, frame*96, 0, 60 , 54*2,
                          canvas.width/2 - 48, canvas.height/2 - 48, 60, 54*2);
        }
    }
    
    var frame = 0;
    
    function update() {
      
        redraw();
        frame++;
        if (frame >= 6) frame = 0;
        setTimeout( update, 12500 / 60 );
    }

  </script>
  </head>
------------------------------------------------------------------------------------------------------------------------------------------->
  </script>
<body  onload='onload()' onresize='onresize()'>
<div class="stage">
        <div class="ken stance"></div>
        <div class="guile stance2 flip"></div>

        <a class="pause"></a>
</div>
<canvas id="gameCanvas" width="500" height="500"></canvas>

    
    
    
        <!--<table class="commands">
        <tr>
            <td>Punch <span class="key" id="a">a</span>
            <td>Kick <span class="key" id="z">z</span>
            <td>Jump &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key" id="up">▲</span>
        <tr>
            <td>Shoryuken <span class="key" id="d">d</span>
            <td>Reverse kick <span class="key" id="e">e</span>
            <td>Walk <span class="key" id="left">◀</span> <span class="key" id="right">►</span> ▲▼◀►
        <tr>
            <td>Hadoken <span class="key" id="s">s</span>
            <td>Tatsumaki Senpuu Kyaku <span class="key" id="q">q</span>
            <td>Kneel &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key" id="down">▼</span>
        <tr>
            <td>
            <td>
            <td>
    </table>
    -->
<script src="js/soundmanager2-jsmin.js"></script>
<script src="js/audio.js"></script>
<!--<script src="js/ken.js"></script>-->
</body>
</html>
